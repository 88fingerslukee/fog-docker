<VirtualHost *:{{FOG_APACHE_SSL_PORT}}>
    ServerName {{FOG_WEB_HOST}}
    DocumentRoot /var/www/html/fog
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile {{FOG_SSL_PATH}}/{{FOG_SSL_CERT_FILE}}
    SSLCertificateKeyFile {{FOG_SSL_PATH}}/{{FOG_SSL_KEY_FILE}}
    
    # SSL Security Settings
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384
    SSLHonorCipherOrder off
    SSLSessionTickets off
    
    # Security Headers
    Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    
    # Logging
    ErrorLog /dev/stderr
    CustomLog /dev/stdout combined
    
    # FOG Configuration
    <Directory /var/www/html/fog>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    # Redirect HTTP to HTTPS
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>
